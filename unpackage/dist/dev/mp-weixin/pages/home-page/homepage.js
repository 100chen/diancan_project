(global["webpackJsonp"] = global["webpackJsonp"] || []).push([["pages/home-page/homepage"],{

/***/ 203:
/*!*****************************************************************************************!*\
  !*** E:/zhizuobiao/非/其他/project-dcuser/main.js?{"page":"pages%2Fhome-page%2Fhomepage"} ***!
  \*****************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(createPage) {

var _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ 3);
__webpack_require__(/*! uni-pages */ 25);
var _vue = _interopRequireDefault(__webpack_require__(/*! vue */ 24));
var _homepage = _interopRequireDefault(__webpack_require__(/*! ./pages/home-page/homepage.vue */ 204));
// @ts-ignore
wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;
createPage(_homepage.default);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */ 1)["createPage"]))

/***/ }),

/***/ 204:
/*!**********************************************************************!*\
  !*** E:/zhizuobiao/非/其他/project-dcuser/pages/home-page/homepage.vue ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _homepage_vue_vue_type_template_id_2ade898e_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./homepage.vue?vue&type=template&id=2ade898e&scoped=true& */ 205);
/* harmony import */ var _homepage_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./homepage.vue?vue&type=script&lang=js& */ 207);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _homepage_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__) if(["default"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _homepage_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__[key]; }) }(__WEBPACK_IMPORT_KEY__));
/* harmony import */ var _homepage_vue_vue_type_style_index_0_id_2ade898e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./homepage.vue?vue&type=style&index=0&id=2ade898e&scoped=true&lang=css& */ 211);
/* harmony import */ var _D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */ 31);

var renderjs





/* normalize component */

var component = Object(_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__["default"])(
  _homepage_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__["default"],
  _homepage_vue_vue_type_template_id_2ade898e_scoped_true___WEBPACK_IMPORTED_MODULE_0__["render"],
  _homepage_vue_vue_type_template_id_2ade898e_scoped_true___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  "2ade898e",
  null,
  false,
  _homepage_vue_vue_type_template_id_2ade898e_scoped_true___WEBPACK_IMPORTED_MODULE_0__["components"],
  renderjs
)

component.options.__file = "pages/home-page/homepage.vue"
/* harmony default export */ __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ 205:
/*!*****************************************************************************************************************!*\
  !*** E:/zhizuobiao/非/其他/project-dcuser/pages/home-page/homepage.vue?vue&type=template&id=2ade898e&scoped=true& ***!
  \*****************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_homepage_vue_vue_type_template_id_2ade898e_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./homepage.vue?vue&type=template&id=2ade898e&scoped=true& */ 206);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "render", function() { return _D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_homepage_vue_vue_type_template_id_2ade898e_scoped_true___WEBPACK_IMPORTED_MODULE_0__["render"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_homepage_vue_vue_type_template_id_2ade898e_scoped_true___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "recyclableRender", function() { return _D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_homepage_vue_vue_type_template_id_2ade898e_scoped_true___WEBPACK_IMPORTED_MODULE_0__["recyclableRender"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "components", function() { return _D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_homepage_vue_vue_type_template_id_2ade898e_scoped_true___WEBPACK_IMPORTED_MODULE_0__["components"]; });



/***/ }),

/***/ 206:
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/zhizuobiao/非/其他/project-dcuser/pages/home-page/homepage.vue?vue&type=template&id=2ade898e&scoped=true& ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "recyclableRender", function() { return recyclableRender; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "components", function() { return components; });
var components
var render = function () {
  var _vm = this
  var _h = _vm.$createElement
  var _c = _vm._self._c || _h
  if (!_vm._isMounted) {
    _vm.e0 = function ($event) {
      $event.stopPropagation()
      _vm.total_quantity == 0 ? false :  true && _vm.placean_order()
    }
  }
}
var recyclableRender = false
var staticRenderFns = []
render._withStripped = true



/***/ }),

/***/ 207:
/*!***********************************************************************************************!*\
  !*** E:/zhizuobiao/非/其他/project-dcuser/pages/home-page/homepage.vue?vue&type=script&lang=js& ***!
  \***********************************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _D_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_homepage_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./homepage.vue?vue&type=script&lang=js& */ 208);
/* harmony import */ var _D_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_homepage_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_D_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_homepage_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _D_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_homepage_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__) if(["default"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _D_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_homepage_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_D_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_homepage_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ 208:
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/zhizuobiao/非/其他/project-dcuser/pages/home-page/homepage.vue?vue&type=script&lang=js& ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ 3);
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _regenerator = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/regenerator */ 39));
var _asyncToGenerator2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ 200));
var _order = __webpack_require__(/*! ../../config/order.js */ 209);
var _Date_analysis = __webpack_require__(/*! ../../config/Date_analysis.js */ 210);
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//

var app = getApp();
var Modelmes = app.globalData.Modelmes;

// 用骨架屏 
var Home = function Home() {
  __webpack_require__.e(/*! require.ensure | pages/skeleton-view/home */ "pages/skeleton-view/home").then((function () {
    return resolve(__webpack_require__(/*! ../skeleton-view/home.vue */ 230));
  }).bind(null, __webpack_require__)).catch(__webpack_require__.oe);
};
var Scart = function Scart() {
  __webpack_require__.e(/*! require.ensure | pages/home-page/components/s-cart */ "pages/home-page/components/s-cart").then((function () {
    return resolve(__webpack_require__(/*! ../home-page/components/s-cart.vue */ 237));
  }).bind(null, __webpack_require__)).catch(__webpack_require__.oe);
};
var Details = function Details() {
  __webpack_require__.e(/*! require.ensure | pages/home-page/components/goods_detail */ "pages/home-page/components/goods_detail").then((function () {
    return resolve(__webpack_require__(/*! ./components/goods_detail.vue */ 244));
  }).bind(null, __webpack_require__)).catch(__webpack_require__.oe);
};
// 1. 获取数据库引用
var db = wx.cloud.database();
var _ = db.command;
var good_collect = db.collection('order_data');
var dishes_data = db.collection('dishes-data');
var _default = {
  components: {
    Scart: Scart,
    Details: Details,
    Home: Home
  },
  data: function data() {
    return {
      exist: true,
      Modelmes: Modelmes,
      itemize: [],
      //类目
      trigger: 0,
      //类目加上背景色
      goods: [],
      //所有菜品
      heightset: [],
      //每个高度存储
      tophei: 0,
      //滚动时距离顶部高度
      scroll_into: '',
      cart: false,
      //购物车隐藏
      shopping_card: [],
      //购物车数据
      popupitem: false,
      //单个商品弹出隐藏
      pro_details: {},
      //单个商品弹出框详情数据
      tmplIds: 'qip2S5bL2P_Af7nflfmUJGelyouRdyq6eL_iWW4xnu8',
      //模板id
      number_people: 0 //用餐人数
    };
  },

  methods: {
    /* 点击类目加上背景 */itemIze: function itemIze(index, cid) {
      var _this = this;
      this.trigger = index;
      this.scroll_into = cid;
      // 用户体验提升(点后再滚再点)
      setTimeout(function () {
        _this.scroll_into = '';
      }, 200);
    },
    // 滚动时触发
    scroLl: function scroLl(event) {
      // console.log(event.detail.scrollTop);
      var scrollTop = event.detail.scrollTop;
      if (scrollTop >= this.tophei) {
        //上拉
        // console.log('上拉');
        // 当前分类商品高度要是小于滚动高度时就跳转到下一个分类
        if (scrollTop >= this.heightset[this.trigger]) {
          this.trigger++;
        }
      } else {
        //下拉
        // 当前分类商品高度要是大滚动高度时就跳转到下一个分类
        if (scrollTop <= this.heightset[this.trigger - 1]) {
          this.trigger--;
        }
      }
      this.tophei = scrollTop;
    },
    // 增加  单个商品
    plus: function plus(index, goodsindex, cid, itemgoods) {
      var quantity = itemgoods.quantity,
        image = itemgoods.image,
        name = itemgoods.name,
        unitprice = itemgoods.unitprice,
        unit = itemgoods.unit,
        _id = itemgoods._id;
      // console.log(_id);
      // console.log(index + '-----'+goodsindex);
      var QU = quantity + 1;
      this.$set(this.goods[index].good_query[goodsindex], 'quantity', QU);
      var arr = {
        image: image,
        name: name,
        unitprice: unitprice,
        quantity: QU,
        unit: unit,
        total_price: unitprice * QU,
        cid: cid,
        goodsindex: goodsindex,
        _id: _id
      };
      this.shopping_cart(arr);
    },
    // 减少  单个商品
    reduce: function reduce(index, goodsindex, cid, itemgoods) {
      var quantity = itemgoods.quantity,
        image = itemgoods.image,
        name = itemgoods.name,
        unitprice = itemgoods.unitprice,
        unit = itemgoods.unit,
        _id = itemgoods._id;
      // console.log(index + '-----'+goodsindex);
      var QU = quantity - 1;
      this.$set(this.goods[index].good_query[goodsindex], 'quantity', QU);
      //对象
      var arr = {
        image: image,
        name: name,
        unitprice: unitprice,
        quantity: QU,
        unit: unit,
        total_price: unitprice * QU,
        cid: cid,
        goodsindex: goodsindex,
        _id: _id
      };
      this.shopping_cart(arr);
    },
    // 添加存储购物车商品
    shopping_cart: function shopping_cart(arr) {
      // console.log(arr);

      if (this.shopping_card.length == 0) {
        // 1.购物车没有数据 空数组
        // 直接添加进数据
        this.shopping_card.push(arr);
      } else {
        // console.log(this.shopping_card);
        // 2.购物车有数据
        // 有相同数据
        var itemindex = this.shopping_card.findIndex(function (item) {
          return item._id == arr._id;
        });
        if (itemindex == -1) {
          // 没有相同数据
          this.shopping_card.unshift(arr);
          // console.log("165",this.shopping_card);
        } else {
          this.$set(this.shopping_card[itemindex], 'quantity', arr.quantity);
          this.$set(this.shopping_card[itemindex], 'total_price', arr.total_price);
        }
      }
      // console.log(this.shopping_card);
      this.quninit_of_goods();
    },
    // 计算左边各分类下添加了多少商品
    quninit_of_goods: function quninit_of_goods() {
      var _this2 = this;
      var array = this.shopping_card;
      var res = {};
      array.forEach(function (item) {
        if (res[item.cid]) {
          // console.log("181",res[item.cid]);
          res[item.cid] += item.quantity;
        } else {
          res[item.cid] = item.quantity;
        }
      });
      var M = [];
      for (var k in res) {
        M.push({
          cid: k,
          value: res[k]
        });
      }
      // console.log(M);
      M.forEach(function (item) {
        var res_index = _this2.itemize.findIndex(function (iteming) {
          return iteming.cid == item.cid;
        });
        // console.log(res_index);
        _this2.$set(_this2.itemize[res_index], 'sele_quantity', item.value);
        // console.log(item.value);
      });
    },
    // 购物车商品加减数量
    shopping_Cart_add_sub: function shopping_Cart_add_sub(index, QU, cid, _id, goodsindex, unitprice) {
      this.$set(this.shopping_card[index], 'quantity', QU);
      this.$set(this.shopping_card[index], 'total_price', QU * unitprice);
      // 根据_id唯一标识查询商品的数量做到同步购车加减同步
      // console.log(this.goods);
      var itemcid = this.goods.findIndex(function (item) {
        return item.cid == cid;
      });
      // console.log(itemcid);
      // console.log(this.goods[itemcid].good_query[good_index]);
      this.$set(this.goods[itemcid].good_query[goodsindex], 'quantity', QU);
      this.quninit_of_goods();
    },
    // 清空已点  子组件调用
    empty_data: function empty_data() {
      this.shopping_card = [];
      // console.log("217",this.itemize);
      this.itemize.forEach(function (item) {
        item.sele_quantity = 0;
      });
      // console.log("219",this.goods);
      this.goods.forEach(function (item) {
        item.good_query.forEach(function (T) {
          T.quantity = 0;
        });
      });
      this.dian_shopping(false);
    },
    // 弹出或隐藏单个菜品框
    pop_upitem: function pop_upitem() {
      var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;
      var index = arguments.length > 1 ? arguments[1] : undefined;
      var goods_index = arguments.length > 2 ? arguments[2] : undefined;
      var cid = arguments.length > 3 ? arguments[3] : undefined;
      var itemgoods = arguments.length > 4 ? arguments[4] : undefined;
      this.popupitem = value;
      this.pro_details = {
        index: index,
        goods_index: goods_index,
        cid: cid,
        itemgoods: itemgoods
      };
      console.log("241", this.pro_details);
    },
    // 显示购物车
    dian_shopping: function dian_shopping() {
      var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;
      this.cart = value;
    },
    dishEs: function dishEs() {
      var _this3 = this;
      return (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee() {
        var res;
        return _regenerator.default.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return wx.cloud.callFunction({
                  name: 'Dish-manage',
                  data: {}
                });
              case 2:
                res = _context.sent;
                console.log(res);
                _this3.itemize = res.result.res_cate; //类目
                _this3.goods = res.result.res_dis; // 所有菜品
                // 所有数据完毕再滚动到指定类目
                _this3.scroll_into = 'a1676441014443';
                _this3.$nextTick(function () {
                  _this3.goods_height();
                });
              case 8:
              case "end":
                return _context.stop();
            }
          }
        }, _callee);
      }))();
    },
    // 计算右边每个菜品分类高度
    goods_height: function goods_height() {
      var _this4 = this;
      this.heightset = [];
      var cate_height = 0;
      var query = wx.createSelectorQuery();
      query.selectAll('.rig-height').boundingClientRect();
      query.exec(function (res) {
        // console.log(res)
        res[0].forEach(function (item) {
          // console.log(item.height);
          cate_height += item.height;
          _this4.heightset.push(cate_height);
        });
        _this4.exist = false;
      });
    },
    // 弹出订阅消息弹窗
    placean_order: function placean_order() {
      var _this5 = this;
      // 消息弹窗
      wx.requestSubscribeMessage({
        tmplIds: [this.tmplIds],
        success: function success(res) {
          console.log("298", res);
          _this5.sub_database();
        },
        fail: function fail(err) {
          _this5.sub_database();
        }
      });
    },
    // 提交订单
    sub_database: function sub_database() {
      var _this6 = this;
      return (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee3() {
        var res, sett_amount, table_number, number_of_diners, order, add_goods, query, total_amount, time_data;
        return _regenerator.default.wrap(function _callee3$(_context3) {
          while (1) {
            switch (_context3.prev = _context3.next) {
              case 0:
                wx.showLoading({
                  title: '正在下单',
                  mask: true
                });
                // console.log(123);
                // console.log("293",this.shopping_card);
                // 1. 过滤总价为0的购物车菜品
                res = _this6.shopping_card.filter(function (item) {
                  return item.total_price != 0;
                }); // 2. 计算总价  
                sett_amount = 0;
                res.forEach(function (item) {
                  sett_amount += item.total_price;
                });

                // 取出本地缓存的桌号和用餐人数
                table_number = wx.getStorageSync('table_num');
                number_of_diners = wx.getStorageSync('number_of_diners');
                order = {
                  table_number: table_number,
                  //桌子号数
                  number_of_diners: number_of_diners,
                  //用餐人数
                  order_time: _this6.$Time().utcOffset(8).format('YYYY-MM-DD HH:mm:ss'),
                  sett_amount: sett_amount,
                  //交易金额
                  order_no: (0, _order.Code)(),
                  transac_status: 'unsettled',
                  //商家 结账状态
                  order_receiving: 'mis_orders',
                  //商家  接单状态
                  menu: [{
                    backup_data: '备用字段',
                    goods_list: res
                  }]
                }; // 加菜
                add_goods = {
                  backup_data: '备用字段',
                  goods_list: res
                };
                _context3.prev = 8;
                _context3.next = 11;
                return good_collect.where({
                  table_number: table_number,
                  transac_status: 'unsettled'
                }).field({
                  _id: true,
                  sett_amount: true
                }).get();
              case 11:
                query = _context3.sent;
                if (!(query.data.length == 0)) {
                  _context3.next = 17;
                  break;
                }
                _context3.next = 15;
                return good_collect.add({
                  data: order
                });
              case 15:
                _context3.next = 20;
                break;
              case 17:
                // 没有结账  就是考虑加菜
                total_amount = Number(query.data[0].sett_amount) + sett_amount;
                _context3.next = 20;
                return good_collect.doc(query.data[0]._id).update({
                  data: {
                    sett_amount: total_amount,
                    order_receiving: 'mis_orders',
                    menu: _.unshift(add_goods)
                  }
                });
              case 20:
                // 批量自增售出数量
                res.forEach( /*#__PURE__*/function () {
                  var _ref = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2(item) {
                    return _regenerator.default.wrap(function _callee2$(_context2) {
                      while (1) {
                        switch (_context2.prev = _context2.next) {
                          case 0:
                            _context2.next = 2;
                            return dishes_data.doc(item._id).update({
                              data: {
                                monthlysale: _.inc(item.quantity)
                              }
                            });
                          case 2:
                          case "end":
                            return _context2.stop();
                        }
                      }
                    }, _callee2);
                  }));
                  return function (_x) {
                    return _ref.apply(this, arguments);
                  };
                }());

                // 计算当天销售额
                time_data = _this6.$Time().utcOffset(8).format('YYYY-MM-DD');
                _context3.next = 24;
                return new _Date_analysis.Analysis().sameday(time_data, sett_amount);
              case 24:
                _this6.push_message();

                // 跳转订单详情页面
                wx.redirectTo({
                  url: '/pages/order-detail/detail'
                });
                wx.hideLoading();
                _context3.next = 32;
                break;
              case 29:
                _context3.prev = 29;
                _context3.t0 = _context3["catch"](8);
                // console.log("348",e);
                //TODO handle the exception
                wx.showToast({
                  title: '发送错误',
                  icon: 'error'
                });
              case 32:
              case "end":
                return _context3.stop();
            }
          }
        }, _callee3, null, [[8, 29]]);
      }))();
    },
    // 我的订单
    my_order: function my_order() {
      wx.navigateTo({
        url: '/pages/my-order/my-order'
      });
    },
    // 推送订单提醒
    push_message: function push_message() {
      var pubsub = this.goeasy.pubsub;
      pubsub.publish({
        channel: "my_channel",
        //替换为您自己的channel
        message: "Hello 我是小程序端来的!",
        //替换为您想要发送的消息内容
        onSuccess: function onSuccess() {
          console.log("消息发布成功。");
        },
        onFailed: function onFailed(error) {
          console.log("消息发送失败，错误编码：" + error.code + " 错误信息：" + error.content);
        }
      });
    }
  },
  onLoad: function onLoad(e) {
    // 获取用餐人数
    this.number_people = wx.getStorageSync('number_of_diners');
    this.dishEs();
  },
  computed: {
    // 计算购物车的商品总数
    total_quantity: function total_quantity() {
      // 不能用const 定义
      // const quantity = 0;
      var quantity = 0;
      this.shopping_card.forEach(function (item) {
        quantity += item.quantity;
      });
      return quantity;
    }
  }
};
exports.default = _default;

/***/ }),

/***/ 211:
/*!*******************************************************************************************************************************!*\
  !*** E:/zhizuobiao/非/其他/project-dcuser/pages/home-page/homepage.vue?vue&type=style&index=0&id=2ade898e&scoped=true&lang=css& ***!
  \*******************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _D_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_D_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_D_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_homepage_vue_vue_type_style_index_0_id_2ade898e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-2!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./homepage.vue?vue&type=style&index=0&id=2ade898e&scoped=true&lang=css& */ 212);
/* harmony import */ var _D_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_D_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_D_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_homepage_vue_vue_type_style_index_0_id_2ade898e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_D_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_D_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_D_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_homepage_vue_vue_type_style_index_0_id_2ade898e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _D_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_D_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_D_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_homepage_vue_vue_type_style_index_0_id_2ade898e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__) if(["default"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _D_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_D_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_D_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_homepage_vue_vue_type_style_index_0_id_2ade898e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_D_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_D_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_D_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_homepage_vue_vue_type_style_index_0_id_2ade898e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ 212:
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-2!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/zhizuobiao/非/其他/project-dcuser/pages/home-page/homepage.vue?vue&type=style&index=0&id=2ade898e&scoped=true&lang=css& ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
    if(false) { var cssReload; }
  

/***/ })

},[[203,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/home-page/homepage.js.map